# 添加商品到购物车

欢迎来到新的一节《添加商品到购物车》。达成的效果是，用户点购买甜点按钮，右下方的购物数量就会加一。

### 添加购物车图标

进入下一部分《添加购物车图标》。

因为在各个页面都有可能要显示购物车图标所以把它放到布局组件中。

cart-button---

一个小圆形按钮，点一下可以到购物车页面。

看看本部分达成的效果。
至此，《添加购物车图标》这部分就胜利完成了。

### 构建购物车数据

进入下一部分《构建购物车数据》。

先从购买按钮开始做。

addtocart-action---

甜点展示页面，点购买按钮，可以执行 addToCart action 负载数据是当前甜点的 id 。

下面来实现 reducer 。

addedid----

添加了 cart.addedIds 字段，用来记录到底哪个甜点被添加进购物车了。

看看本部分达成的效果。用户点一个甜品的购买按钮，甜品 id 会被添加到状态树的 cart.addedIds 字段中了。

至此，《构建购物车数据》这部分就胜利完成了。

### 读取购物车数据

进入下一部分《读取购物车数据》。暂时判断三个事情，第一，购物车是否为空，第二，购物车中甜点数量，第三，一个甜点我们有没有已经甜点到购物车了。

先来判断购物车是否为空。

iscartempty---

主要是定义一个 iscartempty 选择器，然后容器组件取值，展示组件使用即可。

再来判断甜点数量。

cartcount

定义 cartcount 选择器，让 cartButton 的容器组件可以拿到购物车中具体的商品数量，然后让展示组件显示这个数量。

最后，判断一个甜点有没有已经添加到购物车。

isincart---

容器组件中拿到已经添加到购物车的所有甜点 id ，展示组件中判断一下当前 id 是否已经在购物车中，从而决定购物按钮是要显示成灰色还是红色。

看看本部分达成的效果。默认情况下，购物车图标隐藏，购买第一件甜点，购物车图标出现，同时购买按钮变红，购买第二件商品，购物数量可以变为2。
至此，《读取购物车数据》这部分就胜利完成了。

### 结语

进入最后一部分《结语》。

复盘一下本节思路。首先添加了购物车图标，然后点购买按钮时会触发添加购物车相关的 action 和 reducer，保存到 redux 中的依然是最简数据，只保存了甜点 id ，后面实现界面效果的时候需要回答的多个问题，都是最简数据的派生数据，这些都是通过选择器获得的。

至此，《添加商品到购物车》就胜利完成了。
