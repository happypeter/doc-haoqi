# 实现购物车各项功能

欢迎来到新的一节《实现购物车各项功能》。购物车页面的主要功能有，显示商品海报和价格，修改单品数量，显示总价格，结账这些功能。

### 显示商品海报和价格

进入下一部分《显示商品海报和价格》。购物车页面会有的商品列表，每一个商品会显示海报和价格。

先做界面。

cart-style---

把购物车页面的样式都添加了，弄了一下临时数据。

下一步来获取真实的购物车数据。

cart-dishes----

定义了 getCartDishes 选择器，拿到所有购物车中的甜点 id 和所有甜点的详情，当然就可以运算得到由添加到购物车的所有的甜点的详情组成的数据，也就是 cartDishes ，用这个数据到展示组件中替换临时数据即可。

看看本部分达成的效果。用户把一件商品添加到购物车后，点购物车图标进入购物车页面，购物车商品列表中，可以看到这件商品的海报和价格。

至此，《显示商品海报和价格》这部分就胜利完成了。

### 增加单品数量

进入下一部分《增加单品数量》。

新发出 action 。

increa-cart-item-aciton----

用户点增加或者减少单品按钮，可以发出对应的 action ，并且把当前甜点的 id 发送给 reducer 了。

那 reducer 接收到数据之后如何处理呢。

incre-reducer----

收到的是 ADD_TO_CART 这个 action ，意味着该商品被添加到了购物车，那么商品的数量，也就是是 quantity 默认设置为1，首要 INCRE_CART_ITEM ，意味着用户要增加单品数量，那就把对应 id 的这个单品的数量加一，收到 DECRE_CART_ITEM 则减一。

最后让页面上显示正确的单品数量。

show-quantity

在 cartDishes 中的每一个 dish 详情中，又插入了一项，就是数量 quantity ，然后显示到页面上即可。

看看本部分达成的效果。用户选中商品后，在购物车页面可以对单品数量进行修改。

至此，《增加单品数量》这部分就胜利完成了。

### 结账

进入下一部分《结账》。面临两个任务，一个是运算总价，另一个就是结账走人。

先来运算总价。

gettotal---

添加了运算总价的选择器 getTotal 。

再来做结账功能。

checkout---

结账成功只是执行页面跳转，显示提示信息以及清空 redux 中的购物车数据，至于生成后端订单数据等等其他功能，我们课程限于篇幅就不弄了。

看看本部分达成的效果。
至此，《结账》这部分就胜利完成了。

### 结语

进入最后一部分《结语》

复盘一下本节思路。购物车页面的主要功能是增加单品数量和运算总价，其中单品数量应该是最简数据，所以要存储到 store 中，而总价则可以通过已有的最简数据演算得到，所以放到了选择器里来完成。

至此，《实现购物车各项功能》就胜利完成了。
