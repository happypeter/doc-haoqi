# JS 面向对象之旅

JS 最早并不是设计来做面向对象编程的，所以 JS 中连 class 关键字都没有。但是当代 JS 开发者，不管是要上手前端框架例如 React ，还是全栈框架，例如 Meteor ，面向对象编程的思想已经是必备的了。顺应这个潮流，ES6 中，class 这个关键字也引入了。Peter 感觉 ES6 的语法非常甜蜜，使用 ES6 来学习面向对象编程其实是个非常好的思路，当然这个应该另起一本书去讲了。

请关照 Peter 的 [《 JS 面向对象之旅》](http://haoqicat.com/o-o-js) 。

### 什么是 Object-Oriented Programming ？

Object Oriented Programming ，简称 OOP ，中文意思就是”面向对象编程“。OOP 是一种用来控制大型软件项目复杂度的软件开发方法论。因为软件规模一上去，就变得很难组织和维护了。没有一个清晰的组织思路，就会造成牵一发而全身动，开发就没法开展了。

我们大概需要的是一个数据和逻辑的容器，那么容器内我改一个东西，不会影响到整个的软件系统。同时，多个这样的容器之间要形成相对简单的关系，而不是联系千丝万缕，那样，代码一样是没法维护。

这样，我们真正需要的其实就是面向对象编程，程序中我们定义多个 class ，每个 class 就是一个逻辑的容器。

![](http://o86bpj665.bkt.clouddn.com/happypeter-js-kingdom/pic15-1-o-o.png)

通过上图，Object （也就是“面向对象”中的这个“对象”）跟 class 是密不可分的，class 可以认为是木桶，object 是桶里的水。

### 典型的面向对象编程语言

面向对象是一种编程范式（范式，是个术语，暂时理解为“思路”就行），其实大部分语言都是同时支持很多编程范式的，而具体到面向对象编程，每种语言对他的支持都是或多或少的。，如果我们把对面向对象编程支持非常完备的语言叫做一种面向对象编程的语言的话，那么最著名的面向对象编程的语言是：C++/Java/Ruby/Python 这几种。

面向对象编程的语言，有一个明显的特征，就是有 class 这个关键字。而像 C 语言，或者传统的 JS （ ES5 或者更早标准下）语言，都是没有这个关键字的，所以不算面向对象编程语言。但是非面向对象编程语言中一样可以用面向对象思想写程序的，比如 C 语言中可以用 struct ，ES5 中可以用 prototype 来模拟 class 的功能。

前面提过 ES6 中已经有了 class 关键字，所以 ES6 也是一种面向对象编程语言了，ES6 从 coffeescript 中借鉴了不少语法过来，而 coffeescript 借鉴了 Ruby 。

### 面向对象的基本思路

知道两点就好了：封装和继承。下面的具体解释有些抽象，大家稍微扫扫，脑子里划个印就行了，真要学的话必须跟代码例子才能学会。

所谓封装，也就是把客观事物封装成抽象的类，并且类可以把自己的数据和方法只让可信的类或者对象操作，对不可信的进行信息隐藏。封装是面向对象的特征之一，是对象和类概念的主要特性。 简单的说，一个类就是一个封装了数据以及操作这些数据的代码的逻辑实体。在一个对象内部，某些代码或某些数据可以是私有的，不能被外界访问。通过这种方式，对象对内部数据提供了不同级别的保护，以防止程序中无关的部分意外的改变或错误的使用了对象的私有部分。

所谓继承，是指可以让某个类型的对象获得另一个类型的对象的属性的方法。它支持按级分类的概念。继承是指这样一种能力：它可以使用现有类的所有功能，并在无需重新编写原来的类的情况下对这些功能进行扩展。 通过继承创建的新类称为“子类”或“派生类”，被继承的类称为“基类”，“父类”或“超类”。继承的过程，就是从一般到特殊的过程。

### 现在就来真正构建一个 class

马上你就会发现 __类__（也就是 class ）和 __对象__（ object ）的概念没有那么难理解。

下面我们用的就是金光闪闪的 ES6 的 `class` 关键字

```
class Dog {
  constructor(name) {
    this.name = name;
  }

  bark() {
    console.log("Wang Wang!");
  }
}

var lele = new Dog("lele");
lele.bark();
```

上面代码中我们定义了一个类，叫 `Dog` 。在”构造函数“（ constructor ，这个是面向对象的基本特性）中，我们会去给 `name` 赋值。Dog 中包含一个__方法__ ，叫做 bark（狗吠）。

而对象，就是一个类的具体化，实例（ instance ）化。比如，下面 `lele` 就是一条具体的小狗了，我们赋值了一个名字 `lele` 给他。然后让 lele 去叫一下。

再来举一个例子，”人“是一个类，他是一个概念和逻辑的容器，如果我们把人实例化，就可以得到 Peter ，Billie 等等具体的人了。

### 参考

- <http://shiroyasha.io/oop-in-the-age-of-es6.html>