# 开通小程序微信支付功能

本节课程将简要介绍一下如何在微信小程序管理后台开通微信支付功能的流程。本课程小程序案例使用的是企业资质在微信管理后台注册的，企业资质认证是通过企业对公账户向腾讯公司账户打款方式验证通过的，所以要想开通小程序案例的微信支付功能，需要经过两个步骤，首先是微信认证，微信认证审核通过之后，才能开通微信支付。

### 申请微信认证

登录微信小程序[管理后台](https://mp.weixin.qq.com/)之后，在左侧导航栏中选择 `设置`，在 `基本设置` 列表中的 `微信认证` 一栏中点击 `详情`，就可以开始申请过程了。这个微信认证的入口可以参考文档[小程序申请微信认证](https://mp.weixin.qq.com/debug/wxadoc/introduction/#小程序申请微信认证)。

申请过程要经过四个步骤：同意协议、填写资料、填写发票和支付费用。在【填写资料】一步中，要填写小程序【管理员手机号码】，这个号码很重要，因为微信认证审核人员会拨打这个手机号码确认提交的资料。另外，可以选择不开具发票。最后，支付300元的认证费用，整个申请过程就结束了。然后，就是等待审核人员拨打电话，确认提交的资料，若核对无误之后，微信认证就通过了。

### 填写微信支付的申请信息

微信认证通过之后，就有资格开通微信支付了。在小程序管理后台左侧导航栏中选择 `微信支付`，这会儿的【微信支付】状态是【未开通】，点击【开通】按钮。

首先提交申请信息分四个步骤：填写基本资料、填写商户信息、填写结算账户和确认提交。

其中在 【填写基本资料】的表单中，要设置【联系人信息】，其中联系人的手机号码和邮箱非常重要，当提交申请之后，马上（真是马上）会有审核人员拨打联系人的手机号码，确认手机号码的真实性。联系人的邮箱会用来接收[微信商户平台](https://pay.weixin.qq.com/index.php/core/home/login)账号密码，所以一定不能填错。另外，还要设置【经营信息】，包括【商户简称】和【经营类目】，其中【商户简称】不能随意起名，而是企业营业执照上面的名称简写；【经营类目】也得依据企业营业执照上的经营范围合理选择。

申请信息的审核时间还是挺快的，当天提交，第二天上午手机就收到短信通知审核结果。因为填写的【商户简称】不符合要求，审核没有通过，马上修改，重新提交资料之后，当天审核就通过了。之后，腾讯公司会向企业的对公账户打款，随机金额的验证款，不需要退回。

申请信息审核通过之后，在小程序管理后台 `微信支付` 页面，会展示出微信支付功能的申请过程：资料审核【已通过】、账户验证、协议签署。

### 验证微信商户账号

接下来要做的事情是【账户验证】，因为没有微信商户号，所以选择【申请一下新的微信支付商户号】，申请成功后，你填写的邮箱中会收到一封邮件，告诉你登录[微信商户平台](https://pay.weixin.qq.com/index.php/core/home/login)的账号和密码信息。

使用邮件中的账号和密码登录[微信商户平台](https://pay.weixin.qq.com/index.php/core/home/login)，Mac 系统下若使用 Chrome 浏览器，即使安装了安全控件也不能在商户登录表单中输入密码，使用 Safari 浏览器不会有问题。然后，就是输入之前腾讯公司给企业对公账户的打款金额，验证成功。

### 在线签署协议

微信商户账户验证成功之后，就是在线签署【微信支付服务协议】，协议签署之后，整个微信支付功能才算开通了。

微信支付功能开通之后，我们就可以登录到微信商户平台，获取商户号、API 秘钥和商户证书，将用于开发本课程小程序案例的微信支付功能。
