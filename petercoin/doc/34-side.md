今天我们聊侧链，Side-Chain。比特币本身性能差而且功能少，为了扩展比特币，人们想出了各种办法。例如为了基于比特币发代币，人们开发了染色币，但是这种方式会往比特币区块链中添加很多数据，所以比特币核心团队其实是不欢迎这种方式的，因为会降低安全性。另外一种就是闪电网络，这是一个基于链下操作（Off-Chain）实现快速交易的网络，但是功能基本上也就只是局限在支付角度。而这次聊的侧链技术，是一种功能最为强大的扩展方式，不但能提升性能，还能增加功能，并且不妥协安全性。

## 技术原理

先说说侧链的基本技术原理。**侧链，顾名思义就是主链边上的一条链**。通常主链就是指比特币区块链了，当然现在也有其他区块链做为主链的侧链技术。

所以说侧链并不是指具体的那条链。**能让比特币从主链转移到其他区块链，并且也能安全的从其他链返回比特币区块链的协议就叫侧链协议。能跟主链通过侧链协议而联通的链都叫侧链**。可以这么说，只要实现了侧链协议，目前大部分的区块链，例如莱特币和以太坊，都可以成为侧链。

侧链技术是比特币核心开发团队主推的一项比特币扩展技术。详细的技术文档在 *https://blockstream.com/sidechains.pdf*。链接中的 blockstream 是一个公司名，公司成员基本都是比特币核心开发者，所以他们公司发布的东西，也可以认为是比特币官方发布的。从技术上讲，侧链技术主要就是基于 Two-Way Peg，也就是双向楔入技术。

## Two-Way Peg 双向楔入

**侧链协议的核心就是实现双向楔入**，楔就是“把钉子楔到墙上”的楔。具体来说，就是实现比特币从主链到侧链之间的来回转移。

基本步骤是这样的：**首先，比特币持有者先发出一个特殊的交易，把比特币锁定在比特币主链上，然后到侧链上就可以去解锁相同数量的比特币。如果要重新获得主链上的比特币，只需要进行反向操作，到侧链上发出一个特殊交易，叫做“赎回交易”，这样就可以把侧链上的比特币锁住，然后解锁主链上的比特币了**。双向楔入技术要保证的就是比特币的在两条链之间的来回转移过程是完全去中心化，并且去信任化的，整个过程不需要第三方担保机构，而且足够的安全。

这个方式优点还是很明显的。对于侧链，就是不用发行自己的原生币。因为如果生态小，肯定币价会波动很大，而使用比特币就稳定的多，更重要的是，也安全的多。而对于比特币自身而言，侧链不自己发币，也就避免了恶性竞争，让比特币作为一种基准货币的地位更加牢固。这也就是为何比特币核心开发团队会如此偏爱侧链技术了。

## 应用

侧链获得了比特币肯定不是最终目的。**侧链技术的意义，其实就像上面提到的侧链白皮书的题目上所说的，就是赋能区块链创新**。因为比特币还是真正的比特币，但是链已经是另外一条跟比特币主链隔离开的链了，于是在上面就随便我们怎么玩了。

**首先，侧链可以通过在一定程度上妥协去中心化，让交易速度变得飞快**。例如，可以考虑不使用 POW 挖矿模式，而使用各种 POS 算法来完成侧链自身的共识。**另外，侧链也可以建设成类似于以太坊的智能合约平台**。著名的 RootStock 项目就是基于比特币区块链的侧链，同时也是一个可以执行强大智能合约的平台。另外，Nervos 项目的 Appchain 也是采用了侧链技术，只不过底层不是比特币。但是**大家的核心思路是一样的，用底层主链去保证安全，侧链去保证效率。**

当然，侧链技术目前还在发展中，很多地方还需要比特币主链做出一些优化才能真正发挥出威力。但是侧链技术的灵活、强大以及安全性都是很棒的，所以前景光明。

## 总结

这节们就到这里了。总结一下：侧链，是一个用于比特币扩容的一项非常灵活强大的技术方案。它指的是可以通过侧链协议和比特币主链进行沟通的一条独立区块链。侧链协议的核心是双向楔入，目的是实现比特币在两条链之间的自由转移。侧链技术使得基于比特币的创新拥有了无限可能，侧链上面既可以获得超快的交易速度，也可以扩充功能，实现类似 RootStock 这样的智能合约平台。
