# 302 Redirect（重定向）

本节瞄准众多的 HTTP 状态码中的一个，也就是 302 。那么多状态码不讲，为何要讲这个呢？因为这个状态挺
特殊，浏览器收到这个后会执行一个操作叫做**重定向**。重定向这个技巧很多场合都用得上，所以今天要专门讲讲。


### 什么是重定向？

好，浏览器中敲一个 URL 去请求服务器上的一个资源，能找到这个资源，就把这个资源直接返回给浏览器，然后响应
中的状态码就是200，如果找不到这个资源（比如，链接敲错了，或者资源被移除了），那么就返回个404。但是在这两种
情形之外，其实还有第三种可能。那就是：资源移动了位置。

比如，原来一个资源的 URL 是：example.com/peter.html ，现在这个资源移动了位置移动到了 example.com/doc/peter.html 了。那么当用户继续使用老连接的时候，我们一般不希望直接粗鲁的给人家返回个404。而是可以这样做：

- 给用户的浏览器发个状态码，代表的意思就是资源已经被移动了
- 同时响应中给浏览器发个新的 URL ，嘿，资源现在已经在这个位置喽！
- 让浏览器自动再发一个指向新的 URL 的请求，注意是自动的

承担上面任务的状态码就是302，完成上面三步，就是所谓的一个**重定向** 。换句话说，把对旧 URL 的请求重新引导到新 URL 上，这种重新引导请求的行为就叫重定向（ redirect ）

上面的第二步中，新的 URL 如何反馈给浏览器呢？就是通过响应头部的 `Location` 这一项。


### 写个服务器演示一下整个过程

空说太空洞，动手写个简单的 express 服务器，来演示一下

index.js 如下

```js
const express = require('express');
const app = express();


app.get('/', function(req, res){
  res.redirect('/new');
})

app.get('/new', function(req, res){
  res.send('Hello New Page');
})

app.listen(3000, function(){
  console.log('running on port 3000...');
})
```

chrome 开发者工具 Network 标签中，可以看到第一次请求，响应的状态码是302，浏览器看到这个状态码，就会自动
发起第二个请求了。
